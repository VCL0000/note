
crtmqm QM1
strmqm QM1
runmqsc QM1 <<!
def listener(LISTENER.TCP) TRPTYPE(TCP) PORT(1418) CONTROL(QMGR)
start LISTENER(LISTENER.TCP)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM1.DEAD.QUEUE') CHLAUTH(DISABLED) FORCE
DEFINE QLOCAL('QM1.DEAD.QUEUE') DESCR(' ') DEFPSIST(YES) MAXDEPTH(999999999) MAXMSGL(104857600) REPLACE
END
!
1.新建本地队列 LQ_0000 (这个本地队列实际上准备接受远程信息的)
2.新建传输队列 TQ_0000 (即新建本地队列，然后将属性-->常规中“使用情况”由默认的“正常”改为“传输”)
3.新建远程队列定义 RQ_0000，在属性-->常规中填入相应的远程队列(LQ_8888)，远程队列管理器(QM2)，选择第2步中创建的传输队列 TQ_0000
4.新建发送方通道 CHL_0000_8888 在属性-->常规中，“连接名称”以ip(port)的形式填入远程主机的IP和端口，如：192.168.3.53(1418)（注意连接名称只能这样填写，不能自己任意命名，而且必须正确，否则两台主机是无法通信的）；“传输队列”选择第2步中创建的传输队列 TQ_0000
5.新建接收方通道 CHL_8888_0000

crtmqm QM2
strmqm QM2
runmqsc QM2 <<!
def listener(LISTENER.TCP) TRPTYPE(TCP) PORT(1418) CONTROL(QMGR)
start LISTENER(LISTENER.TCP)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM2.DEAD.QUEUE') CHLAUTH(DISABLED) FORCE
DEFINE QLOCAL('QM2.DEAD.QUEUE') DESCR(' ') DEFPSIST(YES) MAXDEPTH(999999999) MAXMSGL(104857600) REPLACE
END
!
1.新建本地队列 LQ_8888(这个本地队列实际上准备接受远程信息的)
2.新建传输队列 TQ_8888 (即新建本地队列，然后将属性-->常规中“使用情况”由默认的“正常”改为“传输”)
3.新建远程队列定义 RQ_8888，在属性-->常规中填入相应的远程队列(LQ_0000)，远程队列管理器(QM1)，选择第2步中创建的传输队列 TQ_8888
4.新建发送方通道 CHL_8888_0000 在属性-->常规中，“连接名称”以ip(port)的形式填入远程主机的IP和端口，如：192.168.3.53(1417)（注意连接名称只能这样填写，不能自己任意命名，而且必须正确，否则两台主机是无法通信的）；“传输队列”选择第2步中创建的传输队列 TQ_8888
5.新建接收方通道 CHL_0000_8888



dmpmqcfg -m test.queue.manager -a > test.queue.manager.dump
#! /bin/bash
crtmqm QM01
strmqm QM01
runmqsc QM01 <<!
def listener(LISTENER.TCP) TRPTYPE(TCP) PORT(1419) CONTROL(QMGR)
start LISTENER(LISTENER.TCP)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM01.DEAD.QUEUE') CHLAUTH(DISABLED) FORCE
END
!


runmqsc QM01 <<!
* 本地队列
DEFINE QLOCAL('LQ_0000') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(6291456) DEFBIND(NOTFIXED) REPLACE
* 传输队列
DEFINE QLOCAL('TQ_0000') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(104857600) USAGE(XMITQ) REPLACE
*远程队列
DEFINE QREMOTE('RQ_0000') RQMNAME('QM02') RNAME('LQ_8888') XMITQ('TQ_0000') REPLACE
*发送通道
DEFINE CHANNEL('CHL_0000_8888') CHLTYPE(SDR) TRPTYPE(TCP) CONNAME('192.168.3.53(1420)')  +
DISCINT(0) +
SHORTTMR(20) +
SHORTRTY(100) +
LONGTMR(600) +
LONGRTY(999999999) +
MAXMSGL(6291456) +
XMITQ('TQ_0000') REPLACE
*接受通道
DEFINE CHANNEL('CHL_8888_0000') CHLTYPE(RCVR) TRPTYPE(TCP) MAXMSGL(6291456) REPLACE
end
!


crtmqm QM02
strmqm QM02
runmqsc QM02 <<!
def listener(LISTENER.TCP) TRPTYPE(TCP) PORT(1420) CONTROL(QMGR)
start LISTENER(LISTENER.TCP)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM02.DEAD.QUEUE') CHLAUTH(DISABLED) FORCE
END
!


runmqsc QM02 <<!
* 本地队列
DEFINE QLOCAL('LQ_8888') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(6291456) DEFBIND(NOTFIXED) REPLACE
* 传输队列
DEFINE QLOCAL('TQ_8888') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(104857600) USAGE(XMITQ) REPLACE
*远程队列
DEFINE QREMOTE('RQ_8888') RQMNAME('QM01') RNAME('LQ_0000') XMITQ('TQ_8888') REPLACE
*发送通道
runmqsc QM02 <<!
DEFINE CHANNEL('CHL_8888_0000') CHLTYPE(SDR) TRPTYPE(TCP) +
DISCINT(0) +
SHORTTMR(20) +
SHORTRTY(100) +
LONGTMR(600) +
LONGRTY(999999999) +
MAXMSGL(6291456) +
CONNAME('192.168.3.53(1419)') XMITQ('TQ_8888') REPLACE

DEFINE CHANNEL('CHL_0000_8888') CHLTYPE(RCVR) TRPTYPE(TCP) MAXMSGL(6291456) REPLACE
end
!





#! /bin/bash
crtmqm QM01
strmqm QM01
runmqsc QM01 <<!
def listener(QM01LSR) TRPTYPE(TCP) PORT(1418) CONTROL(QMGR)
start LISTENER(QM01LSR)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM01.DEAD.QUEUE') CHLAUTH(DISABLED) FORCE
END
!

runmqsc QM01 <<!
* 本地队列
DEFINE QLOCAL('LQ_0000') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(6291456) DEFBIND(NOTFIXED) REPLACE
* 传输队列
DEFINE QLOCAL('TQ_0000') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(104857600) USAGE(XMITQ) REPLACE
*远程队列
DEFINE QREMOTE('RQ_1111') RQMNAME('QM11') RNAME('LQ_1111') XMITQ('TQ_0000') REPLACE
*发送通道
DEFINE CHANNEL('CHL_0000_1111') CHLTYPE(SDR) TRPTYPE(TCP) CONNAME('192.168.3.53(1419)')  +
DISCINT(0) +
SHORTTMR(20) +
SHORTRTY(100) +
LONGTMR(600) +
LONGRTY(999999999) +
MAXMSGL(6291456) +
XMITQ('TQ_0000') REPLACE
*接受通道
DEFINE CHANNEL('CHL_1111_0000') CHLTYPE(RCVR) TRPTYPE(TCP) MAXMSGL(6291456) REPLACE
end
!


crtmqm QM11
strmqm QM11
runmqsc QM11 <<!
def listener(QM11LSR) TRPTYPE(TCP) PORT(1419) CONTROL(QMGR)
start LISTENER(QM11LSR)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM11.DEAD.QUEUE') REPOS('QMCLUSTER') CHLAUTH(DISABLED) FORCE
END
!


runmqsc QM11 <<!
*死信队列
DEFINE QLOCAL('QM11.DEAD.QUEUE') DESCR(' ') DEFPSIST(YES) MAXDEPTH(999999999) MAXMSGL(104857600) REPLACE
* 本地队列
DEFINE QLOCAL('LQ_1111') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(6291456) CLUSTER('QMCLUSTER') DEFBIND(NOTFIXED) REPLACE
* 传输队列
DEFINE QLOCAL('TQ_1111') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(104857600) USAGE(XMITQ) REPLACE
*远程队列
DEFINE QREMOTE('RQ_0000') RQMNAME('QM01') RNAME('LQ_0000') XMITQ('TQ_1111') REPLACE
end
!
*发送通道
runmqsc QM11 <<!
DEFINE CHANNEL('CHL_1111_0000') CHLTYPE(SDR) TRPTYPE(TCP) +
DISCINT(0) +
SHORTTMR(20) +
SHORTRTY(100) +
LONGTMR(600) +
LONGRTY(999999999) +
MAXMSGL(6291456) +
CONNAME('192.168.3.53(1418)') XMITQ('TQ_1111') REPLACE

DEFINE CHANNEL('CHL_0000_1111') CHLTYPE(RCVR) TRPTYPE(TCP) MAXMSGL(6291456) REPLACE
end
!

runmqsc QM11 <<!
* 集群发送通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.QM12') +
CHLTYPE(CLUSSDR) +
TRPTYPE(TCP) +
CLUSTER('QMCLUSTER') +
CONNAME('192.168.3.53(1420)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.QM12)
DIS CHS(TO.QM12)
* 集群接受通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.QM11') +
CHLTYPE(CLUSRCVR) +
TRPTYPE(TCP) +
CLUSTER('QMCLUSTER') +
CONNAME('192.168.3.53(1419)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.QM11)
DIS CHS(TO.QM11)
end
!






crtmqm QM12
strmqm QM12
runmqsc QM12 <<!
def listener(QM12LSR) TRPTYPE(TCP) PORT(1420) CONTROL(QMGR)
start LISTENER(QM12LSR)

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('mqm')

ALTER QMGR MAXMSGL(6291456) CCSID(1208) DEADQ('QM12.DEAD.QUEUE') REPOS('QMCLUSTER') CHLAUTH(DISABLED) FORCE
END
!


runmqsc QM12 <<!
* 本地队列
DEFINE QLOCAL('LQ_1111') DESCR(' ') DEFPSIST(NO) MAXDEPTH(999999999) MAXMSGL(6291456) CLUSTER('QMCLUSTER') DEFBIND(NOTFIXED) REPLACE
* 死信队列
DEFINE QLOCAL('QM12.DEAD.QUEUE') DESCR(' ') DEFPSIST(YES) MAXDEPTH(999999999) MAXMSGL(104857600) REPLACE
end
!

runmqsc QM12 <<!
* 集群发送通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.QM11') +
CHLTYPE(CLUSSDR) +
TRPTYPE(TCP) +
CLUSTER('QMCLUSTER') +
CONNAME('192.168.3.53(1419)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.QM11)
DIS CHS(TO.QM11)
* 集群接受通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.QM12') +
CHLTYPE(CLUSRCVR) +
TRPTYPE(TCP) +
CLUSTER('QMCLUSTER') +
CONNAME('192.168.3.53(1420)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.QM12)
DIS CHS(TO.QM12)
end
!
