
crtmqm MQEGSP01
strmqm MQEGSP01

runmqsc MQEGSP01 << !
ALTER QMGR +
MAXMSGL(6291456) +
CCSID(1208) +
DEADQ('MQEGSP01.DEAD.QUEUE') +
REPOS('EGSPCLUSTER') +
CHLAUTH(DISABLED) +
FORCE

ALTER CHANNEL(SYSTEM.DEF.SVRCONN) +
CHLTYPE(SVRCONN) +
MCAUSER('mqm')
END
!
*监听器，用户开放系统的通道连接，端口号可以自定义
runmqsc MQEGSP01 << !
DEFINE LISTENER('MQEGSPLSR') +
TRPTYPE(TCP) +
PORT(20001) +
BACKLOG(0) +
CONTROL (QMGR) +
REPLACE
START LISTENER('MQEGSPLSR')
* 死信队列
DEFINE QLOCAL('MQEGSP01.DEAD.QUEUE') +
DESCR(' ') +
DEFPSIST(YES) +
MAXDEPTH(999999999) +
MAXMSGL(104857600) +
REPLACE
* 集群发送通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.MQEGSP11') +
CHLTYPE(CLUSSDR) +
TRPTYPE(TCP) +
CLUSTER('EGSPCLUSTER') +
CONNAME('192.168.3.53(11001)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.MQEGSP11)
DIS CHS(TO.MQEGSP11)
* 集群接受通道，其中连接名是通道名中队列管理器的ip和端口
DEFINE CHANNEL('TO.MQEGSP01') +
CHLTYPE(CLUSRCVR) +
TRPTYPE(TCP) +
CLUSTER('EGSPCLUSTER') +
CONNAME('192.168.3.53(11000)') +
DISCINT(0) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL(TO.MQEGSP01)
DIS CHS(TO.MQEGSP01)
* 队列管理器别名
DEFINE QREMOTE('MQEGEPGW_ALIAS') +
DESCR(' ') +
REPLACE

* 传输队列
DEFINE QLOCAL('MQCHNRDSSGW') +
DESCR(' ') +
DEFPSIST(NO) +
MAXDEPTH(999999999) +
MAXMSGL(104857600) +
USAGE(XMITQ) +
REPLACE

* 发送通道需要正确配置连接名中对方队列管理器ip和端口
DEFINE CHANNEL('EGSPGW.CHNRDSS') +
CHLTYPE(SDR) +
TRPTYPE(TCP) +
CONNAME('192.168.3.49(11000)') +
DISCINT(0) +
SHORTTMR(20) +
SHORTRTY(100) +
LONGTMR(600) +
LONGRTY(999999999) +
MAXMSGL(6291456) +
XMITQ('EGSPGW') +
REPLACE

START CHANNEL(EGSPGW.CHNRDSS)
DIS CHS(EGSPGW.CHNRDSS)
* 接受通道，与对方的发送通道构成一组完整的通道
DEFINE CHANNEL('CHNRDSS.EGSPGW') +
CHLTYPE(RCVR) +
TRPTYPE(TCP) +
MAXMSGL(6291456) +
REPLACE
START CHANNEL (CHNRDSS.EGSPGW)
DIS CHS (CHNRDSS.EGSPGW)

* 远程返回队列，用于发送消息
DEFINE QREMOTE('REMOTEQ.EGSP01.RSP') +
CLUSTER('EGSPCLUSTER') +
DEFBIND(NOTFIXED) +
DESCR(' ') +
RQMNAME('MQCHNRDSS_ALIAS') +
RNAME('LOCALQ.P.CHNRDSS01.RSP') +
XMITQ('MQCHNRDSSGW') +
REPLACE
* 远程请求队列，用于发送请求报文
DEFINE QREMOTE(REMOTEQ.EGSP01.REQ) +
CLUSTER('EGSPCLUSTER') +
DEFBIND(NOTFIXED) +
DESCR(' ') +
RQMNAME('MQCHNRDSS_ALIAS') +
RNAME('LOCALQ.C.CHNRDSS01.REQ') +
XMITQ('MQCHNRDSSGW') +
REPLACE
* 本地返回队列用于接受返回报文，应用或代理从这个队列中读取服务方的返回报文
DEFINE QLOCAL('LOCALQ.EGSP01.RSP') +
DESCR(' ') +
DEFPSIST(NO) +
MAXDEPTH(999999999) +
MAXMSGL(6291456) +
CLUSTER('EGSPCLUSTER') +
DEFBIND(NOTFIXED) +
REPLACE
END
!
